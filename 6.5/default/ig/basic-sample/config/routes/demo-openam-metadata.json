{
  "name" : "demo-openam-metadata-route",
  "baseURI" : "http://18.211.177.234:10180",
  "condition" : "${matches(request.uri.path, '/.well-known/openid-configuration')}",
  "capture" : [ "response", "request" ],
  "handler" : "Chain",
  "heap" : [ {
    "name" : "Chain",
    "type" : "Chain",
    "config" : {
      "filters" : [ "HeaderFilter-AddResponseHeaders", "ChannelFilter-Demo", "AssignmentFilter-ChangeUriPath", "ChangeHostFilter" ],
      "handler" : "ReverseProxyHandler"
    }
  }, {
    "name" : "HeaderFilter-AddResponseHeaders",
    "type" : "HeaderFilter",
    "config" : {
      "messageType" : "RESPONSE",
      "remove" : [ "Content-Type" ],
      "add" : {
        "Content-Type" : [ "application/json" ]
      }
    }
  }, {
    "name" : "ChannelFilter-Demo",
    "type" : "ChannelFilter",
    "config" : {
      "allowedChannels" : [ {
        "xChannel" : "WEB"
      } ]
    }
  }, {
    "name" : "AssignmentFilter-ChangeUriPath",
    "type" : "AssignmentFilter",
    "config" : {
      "onRequest" : [ {
        "target" : "${request.uri.path}",
        "value" : "${toString('/openamfr').concat(split(request.uri.path, '/openig')[1])}"
      } ]
    }
  }, {
    "name" : "ChangeHostFilter",
    "type" : "HeaderFilter",
    "config" : {
      "messageType" : "REQUEST",
      "remove" : [ "host" ],
      "add" : {
        "host" : [ "18.211.177.234" ]
      }
    }
  }, {
    "name" : "ReverseProxyHandler",
    "type" : "ReverseProxyHandler",
    "config" : {
      "connectionTimeout" : "60 seconds",
      "soTimeout" : "unlimited"
    },
    "capture" : [ "response", "request" ]
  }, {
    "name" : "capture",
    "type" : "CaptureDecorator",
    "config" : {
      "captureEntity" : true,
      "captureContext" : true
    }
  }, {
    "name" : "ForgeRockClientHandler",
    "type" : "Chain",
    "config" : {
      "filters" : [ "TransactionIdOutboundFilter" ],
      "handler" : "ClientHandler"
    },
    "capture" : [ "response", "request" ]
  } ]
}